일관성과 합의

내결함성을 지니 분산 시스템을 구축하는데 쓰이는 알고리즘과 프로토콜

유용한 보장을 해주는 범용 추상화를 찾아 이를 구현하고 애플리케이션에서 이 보장에 의존하게 하는 것

분산시ㅡ템 가자 ㅇ중요한 추상화 중 하나는 합의, 모든 노드가 어떤 것을 동의하게 만드는 것

# 1. 일관성 보장

# 2. 선형성

시스템에 데이터 복사보니 하나만 있고 그 데이터를 대상으로 수행하는 모든 연산은  원자적인 것처럼 보이게 만드는 것
선형성은 최신성 보장, 

## (1) 시스템에 선형성을 부여하는 것은 무엇인가?
시스템에 데이터 복사본이 하나뿐인 것처럼 보이게 만드는 것

선형성의 요구사항은 연산 표시를 모은 선들이 항상 시간순으로 진행돼야함
선형성 : 모든 요청과 응답 시점을 기록하고 그것들이 유효한 순차 순서로 배열되는지 확인함으로써 시스템의 동작이 선형적인지 테스트 할 수 있음


직렬성 : 모든 트랜잭션이 여러 객체를 읽고 쓸 수 있느느 상황에서 트랜잭션들의 격리 속성

## (2) 선형성에 기대기

### A. 잠금과 리더 선출
단일 리더 복제를 사용하는 시스템은 리더가 여러 개가 아니라 하나만 존재하도록 보장해야만 함
합의 알고리즘을 통해 선현성 연산을 내결함성이 있는 방식으로 구현

### B. 제약 조건과 유일성 보장

### C. 채널 간 타이밍 의존성

## (3) 선형성 시스템 구현하기

데이터 복사본이 하나만 있는 것처럼 동작하고 그 데이터에 실행되는 모든 연산은 원자적이라는 걸 의미, 데이터 복사본 하나만 사용하는 것

- 단일 리더 복제

- 합의알고리즘(선형성)

- 다중 리더 복제(비선형적)

- 리더없는 복제(아마도 비선형적)

### A. 선형성과 정족수

## (4) 선형성의 비용

### A. CAP 정리

- 애플리케이션에서 선형성을 요구하고 네트워크 문제 때문에 ㅇㄹ부 복제 서버가 다른 복제서버와 연결이 끊기면 일부 복제서버는 연결이 끊긴 동안 요청을 처리할수 없음

- 애플리케이션에서 선형성을 요구하지 않는다면 각 복제 서버가 다른 복제서버와 연결이 끊기더라도 독립적으로 요청을 처리하는 방식으로 쓰기를 처리할 수 있음

네트워크 분단이 생겼을 떄 앨관성과 가용성 중 하나를 선택하라!

### B. 선형성과 네트워크 지연

# 3. 순서화 보장

선형성 레지스터는 데이터 복사본이 하나만 있는 것처럼 동작하고 모든 연산이 어느 시점에 원자적으로 효과가 나타나는 것처럼 보인다고함

## (1) 순서화와 인과성