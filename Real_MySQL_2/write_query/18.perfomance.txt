18. Performance 스키마 & Sys 스키마


내부에서 발생하는 이벤트에 대한 상세한 정보를 수집해서 한 곳에 모아 사용자들이 손쉽게 접근해서 확인할 수 있게 하는 기능 제공
Performance스키마 & Sys스키마

18.1 Performance 스키마란?
MySQL 서버가 기본적으로 제공하는 시스템 데이터베이스 중 하나로, MySQL 서버의 데이터베이스 목록에서 performance_schema 확인

18.2 Performance 스키마 구성

18.2.1 Setup 테이블
18.2.2 Instance 테이블
18.2.3 Connection 테이블
18.2.4 Variable 테이블
18.2.5 Event 테이블

- Wait Event 테이블 : 각 스레드에서 대기하고 있는 이벤트에 대한 정보 확인 가능, 잠금 경합 또는 I/O 작업 드으로 인해 스레드가 대기
- Stage Event 티에블 : 각 스레드에서 실행한 쿼리들의 처리 단계에 대한 정보를 확인할 수 있음, 현재 어느 단계를 수행하고 있는지 처리단계별 소요시간 등 알 수 있음
- Statement Event 테이블 : 실행한 쿼리와 쿼리에서 반환된 레코드수, 인덱스 사용 유무 및 처리된 방식등의 다양한 정보 함꼐 확인할 수 있음
- Transaction Event 테이블 : 트랜잭션에 대한 정보 확인

18.2.6 Summary 테이블
18.2.7 Lock 테이블
18.2.8 Replication 테이블
18.2.9 Clone 테이블
18.2.10 기타 테이블

18.3 Performance 스키마 설정
- 메모리 사용량 설정
- 데이터 수집 및 저장 설정

18.3.1 메모리 사용량 설정

18.3.2 데이터 수집 및 저장 설정
18.3.2.1 런타임 설정 적용

18.3.2.1.1 저장 레벨 설정
18.3.2.1.2 수집 대상 이벤트 설정
18.3.2.1.3 모니터링 대상 설정
18.3.2.2 Performance 스키마 설정의 영구적용

18.4 Sys 스키마란?
Performance 스키마의 어려운 사용법을 해결해주는 솔루션

18.5 Sys 스키마 사용을 위한 사전 설정

18.6 Sys 스키마 구성

테이블 
스토어드
함수

18.7 Performance 스키마 및 Sys 스키마 활용 예제

18.7.2 미사용 DB 계정 확인
18.7.3 MySQL 총 메모리 사용량 확인
18.7.4 스레드별 메모리 사용량 확인
18.7.5 미사용 인덱스 확인
18.7.6 중복된 인덱스 확인
18.7.7 변경이 없는 테이블 목록 확인
18.7.8 I/O 요청이 많은 테이블 목록 확인
18.7.0 테이블별 작업량 통계확인
18.7.10 테이블의 Auto-Increment 칼럼 사용량 확인
18.7.11 풀테이블 스캔 쿼리 확인
18.7.12 자주 실행되는 쿼리 목록 확인
18.7.13 실행시간이 긴 쿼리 목록 확인

18.7.14 정렬 작업을 수행한 쿼리 목록확인
17.7.15 임시 테이블을 생성하는 쿼리 목록 확인
18.7.16 트랜잭션이 활성 상태인 커넥션에서 실행한 쿼리 내역확인
18.7.18 쿼리 프로파일링
18.7.18 ALTER 작업 진행률 확인

18.7.19 메타데이터 락 대기 확인
18.7.20 데이터 락 대기 확인 